<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alchemist Software</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style.css">
</head><body>
<div class="right-left-margin-container">
    <h1 class="fancy-header">Alchemist Software</h1>
    <nav class="navbar">
        <a href="/index.html">Home</a>
        <a href="/pages/posts.html">Posts</a>
        <a href="/pages/projects.html">Projects</a>
        <a href="/pages/about.html">About</a>
        <a href="/pages/contact.html">Contact</a>
    </nav>
</div>
<div id="activity"></div>
<div id="hacker-dog-container">
  <img src="/assets/images/hackerdog.gif"/>
</div>
<p id="copyright">Copyright Alchemist Software LLC 2023</p></body>
</html>

<script>
async function getGithubEvents() {
    let promise = new Promise((resolve) => {
        fetch(`https://api.github.com/users/cabarger/events/public`)
            .then((Response) => {
                Response.text()
                .then((response_json) => {
                    caleb_github_events = JSON.parse(response_json);
                    resolve(caleb_github_events);
                });
            });
    });
    return promise;
}

const activity_element = document.getElementById("activity"); 
getGithubEvents().then(events => {
  events.forEach((event) => {
    if (event.type == "PushEvent") {
      let card = document.createElement("div");
      card.className = "card"

      let push_info = document.createElement("p");
      push_info.innerHTML = event.created_at.slice(0, 10) + ": pushed " + event.payload.commits.length + " commits to " + `<a href="https://github.com/${event.repo.name}">${event.repo.name}</a>`;
      card.appendChild(push_info);
      event.payload.commits.forEach((commit) => {
        let commit_message = document.createElement("p");
        commit_message.innerHTML = commit.message;
        card.appendChild(commit_message);
      });
      activity_element.appendChild(card);
    }
  });
});

</script>
